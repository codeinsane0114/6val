import{_ as oe}from"./AppTextField-CidaaHzM.js";import{_ as _e}from"./DialogCloseBtn-do27yBJz.js";import{V as G}from"./VCard-DPA8ST1d.js";import{V as j}from"./VCardText-RhVa6W5U.js";import{V as ve}from"./VForm-HbYQbjWg.js";import{V as ge}from"./VTable-BGk_-fzG.js";import{V as z}from"./VCheckbox-DLyduI3k.js";import{r as m,$ as Q,w as F,o as _,f as S,e as t,b as e,d as a,v as y,m as r,aZ as b,c as R,F as I,h as X,al as W,t as k,be as B,bf as E,b5 as T,b3 as L,b4 as O,bq as J,bp as ae,dk as be,dl as xe,dm as he,a as Y,y as K,a3 as M,bb as Ve}from"./main-BpgBUGps.js";import{V as we}from"./VDialog-pRXmThFU.js";import{G as ye}from"./girl-using-laptop-W-MSwEOo.js";import{a as A,V as ee}from"./VRow-DcLldsAi.js";import{V as Ue}from"./VSpacer-BwkbVUnR.js";import{V as q}from"./VAvatar-B9R7oHU8.js";import{a as $e}from"./formatters-Cw2xOObF.js";import{_ as ke}from"./TablePagination-DDm5e6mo.js";import{_ as De}from"./AppSelect-crBF-FCt.js";import{_ as Ce}from"./AddNewUserDrawer-a_zBDbO5.js";import{u as Pe}from"./useApi-DdK-gkOH.js";import{c as Re}from"./createUrl-DNLxE3Ao.js";import{$ as se}from"./api-TCFOQXkB.js";import{V as Ae}from"./VDivider-CPy3CxIk.js";import{V as Me}from"./VDataTableServer-BAtj0Uzn.js";import{V as Se}from"./VImg-MA4fhMLa.js";import{V as Be}from"./VChip-Gdsswa87.js";import{V as Ee}from"./VMenu-D0wOrHxC.js";import{V as Te,a as le,b as re}from"./VList-Bu48BGuL.js";import"./form-jV7EneQK.js";import"./VTextField-DNnTNwAs.js";/* empty css                   */import"./VCounter-B6UOvRBl.js";import"./VField-CsvBDBUR.js";import"./easing-CjukEv2V.js";import"./VInput-h-v4JtUG.js";import"./forwardRefs-C-GTDzx5.js";import"./VCheckboxBtn-KnKlC77n.js";import"./VSelectionControl-tBJoG7de.js";import"./VOverlay-BSwVgU5G.js";import"./delay-CiIYTbkJ.js";import"./lazy-CKzIgbSD.js";import"./scopeId-D5DaYZNr.js";import"./dialog-transition-Dw95iG-S.js";/* empty css              */import"./helpers-DK5QwNv0.js";import"./VPagination-CNJZqHFv.js";import"./VSelect-CvnWonW6.js";import"./validators-DpYrMFzk.js";import"./AppDrawerHeaderSection-3Bs6Y9hY.js";import"./vue3-perfect-scrollbar.esm-BBUBQ5qB.js";import"./VNavigationDrawer-BkJcA9O0.js";import"./ssrBoot-Cao_hl35.js";import"./index-B3bPRkoL.js";import"./VDataTable-D1zlCTrG.js";import"./filter-BHKMO-vf.js";import"./VSlideGroup-qhrbewnN.js";const Le={class:"text-h4 text-center mb-2"},Ie=a("p",{class:"text-body-1 text-center mb-6"}," Set Role Permissions ",-1),je=a("h5",{class:"text-h5 my-6"}," Role Permissions ",-1),Ne=a("td",null,[a("h6",{class:"text-h6"}," Administrator Access ")],-1),ze={colspan:"3"},Fe={class:"d-flex justify-end"},Oe={class:"text-h6"},qe={class:"d-flex justify-end"},Ge={class:"d-flex justify-end"},Qe={class:"d-flex justify-end"},We={class:"d-flex align-center justify-center gap-4"},Ze={__name:"AddEditRoleDialog",props:{rolePermissions:{type:Object,required:!1,default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","update:rolePermissions"],setup(N,{emit:U}){const c=N,x=U,i=m([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),f=m(!1),V=m(""),u=m(),h=Q(()=>{let n=0;return i.value.forEach(d=>{Object.entries(d).forEach(([$,D])=>{$!=="name"&&D&&n++})}),n}),w=Q(()=>h.value>0&&h.value<i.value.length*3);F(f,n=>{i.value=i.value.map(d=>({...d,read:n,write:n,create:n}))}),F(()=>w,()=>{w.value||(f.value=!1)}),F(()=>i,()=>{h.value===i.value.length*3&&(f.value=!0)},{deep:!0}),F(()=>c,()=>{c.rolePermissions&&c.rolePermissions.permissions.length&&(V.value=c.rolePermissions.name,i.value=i.value.map(n=>{var $;const d=($=c.rolePermissions)==null?void 0:$.permissions.find(D=>D.name===n.name);return d?{...n,...d}:n}))});const o=()=>{var d;const n={name:V.value,permissions:i.value};x("update:rolePermissions",n),x("update:isDialogVisible",!1),f.value=!1,(d=u.value)==null||d.reset()},v=()=>{var n;x("update:isDialogVisible",!1),f.value=!1,(n=u.value)==null||n.reset()};return(n,d)=>{const $=_e,D=oe;return _(),S(we,{width:n.$vuetify.display.smAndDown?"auto":900,"model-value":c.isDialogVisible,"onUpdate:modelValue":v},{default:t(()=>[e($,{onClick:v}),e(G,{class:"pa-sm-10 pa-2"},{default:t(()=>[e(j,null,{default:t(()=>[a("h4",Le,y(c.rolePermissions.name?"Edit":"Add New")+" Role ",1),Ie,e(r(ve),{ref_key:"refPermissionForm",ref:u},{default:t(()=>[e(D,{modelValue:r(V),"onUpdate:modelValue":d[0]||(d[0]=p=>b(V)?V.value=p:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),je,e(ge,{class:"permission-table text-no-wrap mb-6"},{default:t(()=>[a("tr",null,[Ne,a("td",ze,[a("div",Fe,[e(z,{modelValue:r(f),"onUpdate:modelValue":d[1]||(d[1]=p=>b(f)?f.value=p:null),indeterminate:r(w),"onUpdate:indeterminate":d[2]||(d[2]=p=>b(w)?w.value=p:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(_(!0),R(I,null,X(r(i),p=>(_(),R("tr",{key:p.name},[a("td",null,[a("h6",Oe,y(p.name),1)]),a("td",null,[a("div",qe,[e(z,{modelValue:p.read,"onUpdate:modelValue":C=>p.read=C,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",Ge,[e(z,{modelValue:p.write,"onUpdate:modelValue":C=>p.write=C,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",Qe,[e(z,{modelValue:p.create,"onUpdate:modelValue":C=>p.create=C,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),a("div",We,[e(W,{onClick:o},{default:t(()=>[k(" Submit ")]),_:1}),e(W,{color:"secondary",variant:"tonal",onClick:v},{default:t(()=>[k(" Cancel ")]),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},He={class:"text-body-1"},Je={class:"v-avatar-group"},Ke={class:"d-flex justify-space-between align-center"},Xe={class:"text-h5 mb-1"},Ye={class:"d-flex align-center"},et=["onClick"],tt=["src"],at=a("div",{class:"text-end"},[k(" Add new role,"),a("br"),k(" if it doesn't exist. ")],-1),st={__name:"RoleCards",setup(N){const U=m([{role:"Administrator",users:[B,E,T,L],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[B,E,T,L,O,J,ae],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[B,E,T,L,O],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[B,E,T,L,O,J],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[B,E,T,L,O,J,ae,be,xe,he],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),c=m(!1),x=m(),i=m(!1),f=V=>{c.value=!0,x.value=V};return(V,u)=>{const h=Y("IconBtn"),w=Ze;return _(),R(I,null,[e(ee,null,{default:t(()=>[(_(!0),R(I,null,X(r(U),o=>(_(),S(A,{key:o.role,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(G,null,{default:t(()=>[e(j,{class:"d-flex align-center pb-4"},{default:t(()=>[a("div",He," Total "+y(o.users.length)+" users ",1),e(Ue),a("div",Je,[(_(!0),R(I,null,X(o.users,(v,n)=>(_(),R(I,{key:v},[o.users.length>4&&o.users.length!==4&&n<3?(_(),S(q,{key:0,image:v},null,8,["image"])):K("",!0),o.users.length===4?(_(),S(q,{key:1,image:v},null,8,["image"])):K("",!0)],64))),128)),o.users.length>4?(_(),S(q,{key:0,color:V.$vuetify.theme.current.dark?"#373B50":"#EEEDF0"},{default:t(()=>[a("span",null," +"+y(o.users.length-3),1)]),_:2},1032,["color"])):K("",!0)])]),_:2},1024),e(j,null,{default:t(()=>[a("div",Ke,[a("div",null,[a("h5",Xe,y(o.role),1),a("div",Ye,[a("a",{href:"javascript:void(0)",onClick:v=>f(o.details)}," Edit Role ",8,et)])]),e(h,{class:"align-self-end"},{default:t(()=>[e(M,{icon:"bx-copy",class:"text-disabled"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(A,{cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(G,{class:"h-100",ripple:!1},{default:t(()=>[e(ee,{"no-gutters":"",class:"h-100"},{default:t(()=>[e(A,{cols:"6",class:"d-flex flex-column justify-end align-center mt-5"},{default:t(()=>[a("img",{width:"105",src:r(ye)},null,8,tt)]),_:1}),e(A,{cols:"6"},{default:t(()=>[e(j,{class:"d-flex flex-column align-end justify-end gap-4"},{default:t(()=>[e(W,{size:"small",onClick:u[0]||(u[0]=o=>i.value=!0)},{default:t(()=>[k(" Add New Role ")]),_:1}),at]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{"is-dialog-visible":r(i),"onUpdate:isDialogVisible":u[1]||(u[1]=o=>b(i)?i.value=o:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(w,{"is-dialog-visible":r(c),"onUpdate:isDialogVisible":u[2]||(u[2]=o=>b(c)?c.value=o:null),"role-permissions":r(x),"onUpdate:rolePermissions":u[3]||(u[3]=o=>b(x)?x.value=o:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}},lt={class:"d-flex align-start flex-column flex-sm-row flex-wrap gap-4"},rt={style:{"inline-size":"15.625rem"}},ot={style:{"inline-size":"9.375rem"}},nt={style:{"inline-size":"9.375rem"}},it={class:"d-flex align-center gap-x-4"},ut={key:1},dt={class:"d-flex flex-column"},mt={class:"text-base"},ct={class:"text-sm"},pt={class:"d-flex align-center gap-x-2"},ft={class:"text-capitalize text-high-emphasis text-body-1"},_t={class:"text-body-1 text-high-emphasis text-capitalize"},vt={__name:"UserList",async setup(N){let U,c;const x=m(""),i=m(),f=m(),V=m(),u=m(10),h=m(1),w=m(),o=m(),v=m([]),n=g=>{var l,P;w.value=(l=g.sortBy[0])==null?void 0:l.key,o.value=(P=g.sortBy[0])==null?void 0:P.order},d=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Billing",key:"billing"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:$,execute:D}=([U,c]=Ve(()=>Pe(Re("/apps/users",{query:{q:x,status:V,plan:f,role:i,itemsPerPage:u,page:h,sortBy:w,orderBy:o}}))),U=await U,c(),U),p=Q(()=>$.value.users),C=Q(()=>$.value.totalUsers),ne=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],ie=[{title:"Company",value:"company"},{title:"Team",value:"team"},{title:"Basic",value:"basic"},{title:"Enterprise",value:"enterprise"}],Z=g=>{const l=g.toLowerCase();return l==="subscriber"?{color:"success",icon:"bx-user"}:l==="admin"?{color:"primary",icon:"bx-crown"}:l==="maintainer"?{color:"info",icon:"bx-pie-chart-alt"}:l==="editor"?{color:"warning",icon:"bx-edit"}:l==="author"?{color:"error",icon:"bx-desktop"}:{color:"success",icon:"bx-user"}},ue=g=>{const l=g.toLowerCase();return l==="pending"?"warning":l==="active"?"success":l==="inactive"?"secondary":"primary"},H=m(!1),de=async g=>{await se("/apps/users",{method:"POST",body:g}),D()},me=async g=>{await se(`/apps/users/${g}`,{method:"DELETE"});const l=v.value.findIndex(P=>P===g);l!==-1&&v.value.splice(l,1),D()};return(g,l)=>{const P=De,ce=oe,pe=Y("RouterLink"),te=Y("IconBtn"),fe=ke;return _(),R("section",null,[e(G,null,{default:t(()=>[e(j,{class:"d-flex flex-md-row flex-column justify-space-between gap-4"},{default:t(()=>[e(P,{"model-value":r(u),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":l[0]||(l[0]=s=>u.value=parseInt(s,10))},null,8,["model-value"]),a("div",lt,[a("div",rt,[e(ce,{modelValue:r(x),"onUpdate:modelValue":l[1]||(l[1]=s=>b(x)?x.value=s:null),placeholder:"Search User"},null,8,["modelValue"])]),a("div",ot,[e(P,{modelValue:r(i),"onUpdate:modelValue":l[2]||(l[2]=s=>b(i)?i.value=s:null),placeholder:"Select Role",items:ne,clearable:"","clear-icon":"bx-x"},null,8,["modelValue"])]),a("div",nt,[e(P,{modelValue:r(f),"onUpdate:modelValue":l[3]||(l[3]=s=>b(f)?f.value=s:null),placeholder:"Select Plan",items:ie,clearable:"","clear-icon":"bx-x"},null,8,["modelValue"])])])]),_:1}),e(Ae),e(Me,{"items-per-page":r(u),"onUpdate:itemsPerPage":l[5]||(l[5]=s=>b(u)?u.value=s:null),"model-value":r(v),"onUpdate:modelValue":l[6]||(l[6]=s=>b(v)?v.value=s:null),page:r(h),"onUpdate:page":l[7]||(l[7]=s=>b(h)?h.value=s:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:r(p),"items-length":r(C),headers:d,class:"text-no-wrap","show-select":"","onUpdate:options":n},{"item.user":t(({item:s})=>[a("div",it,[e(q,{size:"34",variant:s.avatar?void 0:"tonal",color:s.avatar?void 0:Z(s.role).color},{default:t(()=>[s.avatar?(_(),S(Se,{key:0,src:s.avatar},null,8,["src"])):(_(),R("span",ut,y(("avatarText"in g?g.avatarText:r($e))(s.fullName)),1))]),_:2},1032,["variant","color"]),a("div",dt,[a("h6",mt,[e(pe,{to:{name:"apps-user-view-id",params:{id:s.id}},class:"font-weight-medium text-link"},{default:t(()=>[k(y(s.fullName),1)]),_:2},1032,["to"])]),a("div",ct,y(s.email),1)])])]),"item.role":t(({item:s})=>[a("div",pt,[e(M,{size:20,icon:Z(s.role).icon,color:Z(s.role).color},null,8,["icon","color"]),a("div",ft,y(s.role),1)])]),"item.plan":t(({item:s})=>[a("div",_t,y(s.currentPlan),1)]),"item.status":t(({item:s})=>[e(Be,{color:ue(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[k(y(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(te,{onClick:Vt=>me(s.id)},{default:t(()=>[e(M,{icon:"bx-trash"})]),_:2},1032,["onClick"]),e(te,null,{default:t(()=>[e(M,{icon:"bx-show"})]),_:1}),e(W,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[e(M,{icon:"bx-dots-vertical-rounded"}),e(Ee,{activator:"parent"},{default:t(()=>[e(Te,null,{default:t(()=>[e(le,{to:{name:"apps-user-view-id",params:{id:s.id}}},{prepend:t(()=>[e(M,{icon:"bx-show"})]),default:t(()=>[e(re,null,{default:t(()=>[k("View")]),_:1})]),_:2},1032,["to"]),e(le,{link:""},{prepend:t(()=>[e(M,{icon:"bx-pencil"})]),default:t(()=>[e(re,null,{default:t(()=>[k("Edit")]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[e(fe,{page:r(h),"onUpdate:page":l[4]||(l[4]=s=>b(h)?h.value=s:null),"items-per-page":r(u),"total-items":r(C)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1}),e(Ce,{isDrawerOpen:r(H),"onUpdate:isDrawerOpen":l[8]||(l[8]=s=>b(H)?H.value=s:null),onUserData:de},null,8,["isDrawerOpen"])])}}},gt=a("h4",{class:"text-h4 mb-1"}," Roles List ",-1),bt=a("p",{class:"text-body-1 mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1),xt=a("h4",{class:"text-h4 mb-1 mt-6"}," Total users with their roles ",-1),ht=a("p",{class:"text-body-1 mb-0"}," Find all of your companyâ€™s administrator accounts and their associate roles. ",-1),wa={__name:"index",setup(N){return(U,c)=>(_(),S(ee,null,{default:t(()=>[e(A,{cols:"12"},{default:t(()=>[gt,bt]),_:1}),e(A,{cols:"12"},{default:t(()=>[e(st)]),_:1}),e(A,{cols:"12"},{default:t(()=>[xt,ht]),_:1}),e(A,{cols:"12"},{default:t(()=>[e(vt)]),_:1})]),_:1}))}};export{wa as default};
